[
  {
    "objectID": "equation_annotation.html",
    "href": "equation_annotation.html",
    "title": "Equation annotation proof of concept",
    "section": "",
    "text": "This document presents, in Section 1.1, a proof-of-concept for MathJax equation annotation in HTML documents. The objective is to provide a way to co-locate, in long proofs, a math equation and a textual explanation of how it was derived from the equations preceding it. The source code is here. This feature is based upon the code annotation feature of Quarto.\nI’d be very happy to get feedback on this feature, particularly for the points discussed in Section 1.2.4. Please send me an email (guillaume.dehaene+eqnAnnoation at gmail dot com) or discuss it on the quarto github.\nStatus of the project described in Section 1.2. This is version 0.1 of this project. All features are subject to change before a stabilized version is released. The objective is to release this as:\n\na Quarto lua filter\nstandalone JS + CSS for HTML styling\n\n\n\nBelow we have an example of the \"side\" annotation style: hover, click or focus on equation number.\n\\[\\begin{align}\nA &= \\int B \\label{eq-1} \\\\\n  &= \\sum C \\label{eq-2} \\\\\n  &= \\frac{D}{2} \\label{eq-3} \\\\\n  &= E \\label{eq-4} \\\\\n  &= \\int F \\label{eq-5} \\\\\n  &= G \\label{eq-6} \\\\\n  &= H \\label{eq-7} \\\\\n\\end{align}\\]\n\n\n    \n        Eqs. \\eqref{eq-1}-\\eqref{eq-2}\n    \n    \n        Applying Ross’s happy trees theorem, one happy little accident at a time. Ever make mistakes in life? Let’s make them birds. Yeah, they’re birds now.\n    \n    \n        Eqs. \\eqref{eq-3}-\\eqref{eq-5}\n    \n    \n        Expanding the integral and simplying terms together.\n    \n\nBelow we have an example of the \"bottom\" annotation style: hover, click or focus on the blue text to highlight the corresponding equations.\n\\[\\begin{align}\nA &= \\int B \\label{eq-11} \\\\\n  &= \\sum C \\label{eq-12} \\\\\n  &= \\frac{D}{2} \\label{eq-13} \\\\\n  &= E \\label{eq-14} \\\\\n  &= \\int F \\label{eq-15} \\\\\n  &= G \\label{eq-16} \\\\\n  &= H \\label{eq-17} \\\\\n\\end{align}\\]\n\n\n    \n        Eqs. \\eqref{eq-11}-\\eqref{eq-12}\n    \n    \n        Applying Ross’s happy trees theorem, one happy little accident at a time. Ever make mistakes in life? Let’s make them birds. Yeah, they’re birds now.\n    \n    \n        Eqs. \\eqref{eq-13}-\\eqref{eq-15}\n    \n    \n        Expanding the integral and simplying terms together.\n    \n\n\n\n\n\n\n\nHTML + JS + CSS for bottom styling of equation annotation\nHTML + JS + CSS for side styling of equation annotation\n\n\n\n\nTo add equation annotations to a document:\n\nwrite a HTML document with Latex math rendered using MathJax\nlabel the equation(s) you want to annotate with the \\label{LABEL} latex command\nwrite a dl element with class mathjax-code-annotation\n\nstyle contained dd elements with a colon-separated list of labels data-annotation-target-ids=\"LABEL1;LABEL2\"\nmodify JS script to use \"bottom\" or \"side\" styles\ndd element inner HTML is used as is; or hidden\ndt element inner HTML is used as is, or as a descriptive tooltip\n\n\n\n\n\n\nHTML is received by browser.\nJS script modifies MathJax config.\nMathJax transforms raw math into MathMajx MathML.\nJS script runs:\n\nModifies MathJax renders of \\ref and \\eqref: remove links and tabindex.\nInserts a highlighting div inside of the MathJax render of annotated equations.\nAdds a tippy event listener to trigger the annotation.\n\n\n\n\n\n\nImprove UI/UX for standard user?\n\ncurrently, interactive elements are highlighted with $link-color and cursor: pointer\n\nImprove CSS:\n\nmake code highlight-styling use appropriate variables instead of static\nother?\n\nImprove accessibility? (aria attributes? Other?)\n\nfor highlight?\nfor interactive elements?\nmake sure not to interfere with MathJax\n\nSomehow, the integration in the MathJax lifecycle is not correct.\n\ncurrently, I set the div after the MathJax pageReady hook\nsurprisingly, the MathML exists but does not have the correct size\nthe div is resized on show so it doesn’t matter\ncontrary to quarto, I don’t resize the div when the window is resized in my tests, this works fine\n\nIs the DOM manipulation of the MathJax components ok?\n\nhighlight div is integrated inside the MathJax MathML\ntippy is attached to highlight div\n\n\n\n\n\n\nfurther integrate into quarto/pandoc markdown to HTML pipeline\nfix markdown syntax for equation annotation\nhow to forward quarto/pandoc yaml options to JS script\nproposal for latex styling (definition list as in HTML?)"
  },
  {
    "objectID": "equation_annotation.html#sec-example",
    "href": "equation_annotation.html#sec-example",
    "title": "Equation annotation proof of concept",
    "section": "",
    "text": "Below we have an example of the \"side\" annotation style: hover, click or focus on equation number.\n\\[\\begin{align}\nA &= \\int B \\label{eq-1} \\\\\n  &= \\sum C \\label{eq-2} \\\\\n  &= \\frac{D}{2} \\label{eq-3} \\\\\n  &= E \\label{eq-4} \\\\\n  &= \\int F \\label{eq-5} \\\\\n  &= G \\label{eq-6} \\\\\n  &= H \\label{eq-7} \\\\\n\\end{align}\\]\n\n\n    \n        Eqs. \\eqref{eq-1}-\\eqref{eq-2}\n    \n    \n        Applying Ross’s happy trees theorem, one happy little accident at a time. Ever make mistakes in life? Let’s make them birds. Yeah, they’re birds now.\n    \n    \n        Eqs. \\eqref{eq-3}-\\eqref{eq-5}\n    \n    \n        Expanding the integral and simplying terms together.\n    \n\nBelow we have an example of the \"bottom\" annotation style: hover, click or focus on the blue text to highlight the corresponding equations.\n\\[\\begin{align}\nA &= \\int B \\label{eq-11} \\\\\n  &= \\sum C \\label{eq-12} \\\\\n  &= \\frac{D}{2} \\label{eq-13} \\\\\n  &= E \\label{eq-14} \\\\\n  &= \\int F \\label{eq-15} \\\\\n  &= G \\label{eq-16} \\\\\n  &= H \\label{eq-17} \\\\\n\\end{align}\\]\n\n\n    \n        Eqs. \\eqref{eq-11}-\\eqref{eq-12}\n    \n    \n        Applying Ross’s happy trees theorem, one happy little accident at a time. Ever make mistakes in life? Let’s make them birds. Yeah, they’re birds now.\n    \n    \n        Eqs. \\eqref{eq-13}-\\eqref{eq-15}\n    \n    \n        Expanding the integral and simplying terms together."
  },
  {
    "objectID": "equation_annotation.html#sec-status",
    "href": "equation_annotation.html#sec-status",
    "title": "Equation annotation proof of concept",
    "section": "",
    "text": "HTML + JS + CSS for bottom styling of equation annotation\nHTML + JS + CSS for side styling of equation annotation\n\n\n\n\nTo add equation annotations to a document:\n\nwrite a HTML document with Latex math rendered using MathJax\nlabel the equation(s) you want to annotate with the \\label{LABEL} latex command\nwrite a dl element with class mathjax-code-annotation\n\nstyle contained dd elements with a colon-separated list of labels data-annotation-target-ids=\"LABEL1;LABEL2\"\nmodify JS script to use \"bottom\" or \"side\" styles\ndd element inner HTML is used as is; or hidden\ndt element inner HTML is used as is, or as a descriptive tooltip\n\n\n\n\n\n\nHTML is received by browser.\nJS script modifies MathJax config.\nMathJax transforms raw math into MathMajx MathML.\nJS script runs:\n\nModifies MathJax renders of \\ref and \\eqref: remove links and tabindex.\nInserts a highlighting div inside of the MathJax render of annotated equations.\nAdds a tippy event listener to trigger the annotation.\n\n\n\n\n\n\nImprove UI/UX for standard user?\n\ncurrently, interactive elements are highlighted with $link-color and cursor: pointer\n\nImprove CSS:\n\nmake code highlight-styling use appropriate variables instead of static\nother?\n\nImprove accessibility? (aria attributes? Other?)\n\nfor highlight?\nfor interactive elements?\nmake sure not to interfere with MathJax\n\nSomehow, the integration in the MathJax lifecycle is not correct.\n\ncurrently, I set the div after the MathJax pageReady hook\nsurprisingly, the MathML exists but does not have the correct size\nthe div is resized on show so it doesn’t matter\ncontrary to quarto, I don’t resize the div when the window is resized in my tests, this works fine\n\nIs the DOM manipulation of the MathJax components ok?\n\nhighlight div is integrated inside the MathJax MathML\ntippy is attached to highlight div\n\n\n\n\n\n\nfurther integrate into quarto/pandoc markdown to HTML pipeline\nfix markdown syntax for equation annotation\nhow to forward quarto/pandoc yaml options to JS script\nproposal for latex styling (definition list as in HTML?)"
  }
]